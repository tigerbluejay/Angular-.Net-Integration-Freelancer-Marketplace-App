@if (member) {
<div class="container mt-4">
    <!-- Header and Dirty Form Alert -->
    <div class="row align-items-center mb-3">
        <div class="col-4">
        </div>
        <div class="col-8" *ngIf="editForm?.dirty">
            <div class="alert alert-info pb-0">
                <p><strong>Information:</strong> You have made changes. Any unsaved changes will be lost.</p>
            </div>
        </div>
    </div>
    <h3>Edit Freelancer Profile</h3>

    <!-- Photo Upload Section -->
    <div class="row mb-4 justify-content-center">
        <div class="col-md-6 d-flex align-items-center">
            <!-- Preview -->
            <div class="me-3">
                <img [src]="photoPreviewUrl || './assets/user.png'" alt="Profile preview" class="img-thumbnail"
                    style="width: 80px; height: 80px; object-fit: cover;">
            </div>

            <!-- File input -->
            <div class="flex-grow-1">
                <label for="photo" class="form-label">Profile Photo</label>
                <input type="file" id="photo" class="form-control" (change)="onFileSelected($event)" accept="image/*">
            </div>

            <!-- Delete button -->
            <div class="ms-3 d-flex align-items-center">
                <button type="button" class="btn btn-outline-danger" (click)="onDeletePhoto()"
                    [disabled]="!photoPreviewUrl">
                    Delete Photo
                </button>
            </div>
        </div>
    </div>

    <form (ngSubmit)="onSubmit()" #editForm="ngForm" class="row g-3">

        <!-- Left Column -->
        <div class="col-md-6">
            <div class="mb-3">
                <label for="firstName" class="form-label">First Name</label>
                <input type="text" id="firstName" name="firstName" class="form-control" [(ngModel)]="member.firstName"
                    required />
            </div>

            <div class="mb-3">
                <label for="lastName" class="form-label">Last Name</label>
                <input type="text" id="lastName" name="lastName" class="form-control" [(ngModel)]="member.lastName"
                    required />
            </div>

            <div class="mb-3">
                <label for="dateOfBirth" class="form-label">Date of Birth</label>
                <input type="date" id="dateOfBirth" name="dateOfBirth" class="form-control"
                    [(ngModel)]="member.dateOfBirth" />
            </div>

            <div class="mb-3">
                <label for="gender" class="form-label">Gender</label>
                <select id="gender" name="gender" class="form-select" [(ngModel)]="member.gender">
                    <option value="" selected>Choose...</option>
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                    <option value="Prefer not to say">Prefer not to say</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="country" class="form-label">Country</label>
                <input type="text" id="country" name="country" class="form-control" [(ngModel)]="member.country" />
            </div>

            <div class="mb-3">
                <label for="city" class="form-label">City</label>
                <input type="text" id="city" name="city" class="form-control" [(ngModel)]="member.city" />
            </div>
        </div>

        <!-- Right Column -->
        <div class="col-md-6">
            <div class="mb-3">
                <label for="bio" class="form-label">Bio</label>
                <textarea id="bio" name="bio" rows="3" class="form-control" [(ngModel)]="member.bio"></textarea>
            </div>

            <div class="mb-3">
                <label for="lookingFor" class="form-label">Looking For</label>
                <input type="text" id="lookingFor" name="lookingFor" class="form-control"
                    [(ngModel)]="member.lookingFor" />
            </div>

            <div class="mb-3">
                <label for="website" class="form-label">Website</label>
                <input type="url" id="website" name="website" class="form-control" [(ngModel)]="member.website" />
            </div>

            <div class="mb-3">
                <label for="linkedIn" class="form-label">LinkedIn</label>
                <input type="url" id="linkedIn" name="linkedIn" class="form-control" [(ngModel)]="member.linkedIn" />
            </div>

            <div class="mb-3">
                <label for="gitHub" class="form-label">GitHub</label>
                <input type="url" id="gitHub" name="gitHub" class="form-control" [(ngModel)]="member.gitHub" />
            </div>

            <div class="mb-3 form-check">
                <input type="checkbox" id="isAvailable" name="isAvailable" class="form-check-input"
                    [(ngModel)]="member.isAvailable" />
                <label for="isAvailable" class="form-check-label">Available for projects</label>
            </div>
        </div>

        <!-- Submit button spanning below two columns -->
        <div class="col-12 d-flex justify-content-center gap-3 mt-3 mb-5">
            <button type="submit" class="btn btn-primary px-5" [disabled]="editForm.invalid">
                Update Profile
            </button>

            <button type="button" class="btn btn-secondary px-5" (click)="goToProfile()">
                Back to Profile
            </button>
        </div>
    </form>
</div>
}